spring:
  application:
    name: file-system
  servlet:
    multipart:
      enabled: true
      max-file-size: 100MB
      max-request-size: 100MB
      file-size-threshold: 1KB

  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5433/file_system_db}
    username: ${SPRING_DATASOURCE_USERNAME:user}
    password: ${SPRING_DATASOURCE_PASSWORD:password}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: validate
    open-in-view: false
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  flyway:
    enabled: true
    baseline-on-migrate: true
    clean-disabled: true

server:
  port: ${SERVER_PORT:8080}

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      probes:
        enabled: true


  metrics:
    tags:
      application: ${spring.application.name}
      service: ${DD_SERVICE:file-system-app}
      env: ${DD_ENV:dev}
      version: ${DD_VERSION:1.0.0}
    distribution:
      percentiles-histogram:
        http.server.requests: true

aws:
  region: ${AWS_REGION:us-east-1}
  s3:
    bucket-name: ${AWS_S3_BUCKET:filesystem-s3}

security:
  jwt:
    # Keep quoted to avoid YAML parsing issues; default is a valid base64 key
    secret: "${SECURITY_JWT_SECRET:IkZTI0VwjSvZuMo99cXAx9xzeJhKHLyJODC5PoHsjO4=}"
    expiration-ms: ${SECURITY_JWT_EXPIRATION_MS:86400000}