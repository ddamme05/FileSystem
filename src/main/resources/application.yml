spring:
  application:
    name: file-system
  profiles:
    active: dev
  servlet:
    multipart:
      enabled: true
      max-file-size: 100MB
      max-request-size: 100MB
      file-size-threshold: 1KB
  datasource:
    url: jdbc:postgresql://localhost:5433/file_system_db
    username: user
    password: password
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: validate # Validate schema; Flyway manages migrations
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
  flyway:
    enabled: true
    baseline-on-migrate: true
    clean-disabled: true

server:
  port: 8080

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  endpoint:
    health:
      probes:
        enabled: true
  datadog:
    metrics:
      export:
        enabled: false
  metrics:
    tags:
      application: ${spring.application.name}
      service: ${DD_SERVICE:file-system}
      env: ${DD_ENV:dev}
      version: ${DD_VERSION:1.0.0}
    distribution:
      percentiles-histogram:
        http.server.requests: true

aws:
  s3:
    bucket-name: filesystem-s3

security:
  jwt:
    secret: "${SECURITY_JWT_SECRET:IkZTI0VwjSvZuMo99cXAx9xzeJhKHLyJODC5PoHsjO4=}"
    expiration-ms: ${SECURITY_JWT_EXPIRATION_MS:86400000}